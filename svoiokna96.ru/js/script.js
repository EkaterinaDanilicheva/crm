function init(){var a=new ymaps.Map("map-yandex",{center:[55.730138,37.594238],zoom:7,controls:["zoomControl","fullscreenControl"]}),b=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[55.730138,37.594238]}});a.geoObjects.add(b);var c=a.layers.get(0).get(0);waitForTilesLoad(c).then(function(){spinner.removeClass("is-active")})}function waitForTilesLoad(a){return new ymaps.vow.Promise(function(b,c){var d=getTileContainer(a),e=!0;d.tiles.each(function(a,b){a.isReady()||(e=!1)}),e?b():d.events.once("ready",function(){b()})})}function getTileContainer(a){for(var b in a)if(a.hasOwnProperty(b)&&(a[b]instanceof ymaps.layer.tileContainer.CanvasContainer||a[b]instanceof ymaps.layer.tileContainer.DomContainer))return a[b];return null}function loadScript(a,b){var c=document.createElement("script");c.readyState?c.onreadystatechange=function(){"loaded"!=c.readyState&&"complete"!=c.readyState||(c.onreadystatechange=null,b())}:c.onload=function(){b()},c.src=a,document.getElementsByTagName("head")[0].appendChild(c)}var spinner=$(".ymap-container").children(".loader"),check_if_load=!1,myMapTemp,myPlacemarkTemp,ymap=function(){$(".ymap-container").mouseenter(function(){check_if_load||(check_if_load=!0,spinner.addClass("is-active"),loadScript("https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;loadByRequire=1",function(){ymaps.load(init)}))})};$(function(){ymap()});